/*! my-project 16-10-2015 */
function modalLoading(a){"undefined"!=typeof document.body.style.maxHeight&&(null==a&&(a="正在提交数据，请稍候..."),bootbox.dialog({title:$(document).attr("title"),message:'<img src="/assets/images/ajax-loader2.gif" style="float:left;margin:4px 5px 0 0" />'+a,animate:!1,buttons:{}}))}function modalConfirm(a,b,c){bootbox.dialog({message:b,title:a,buttons:{success:{label:"取消",className:"btn-success",callback:function(){c(!1)}},main:{label:"确定",className:"btn-primary",callback:function(){c(!0)}}}})}function finAlert(a,b,c){if("undefined"==typeof document.body.style.maxHeight)return void alert(a);Messenger.options={extraClasses:"messenger-fixed messenger-theme-flat messenger-on-top",theme:"future"};var d=$.extend({message:a,type:"error",hideAfter:10,hideOnNavigate:!0,showCloseButton:!0},c);0==b?Messenger().post(d):(d.type="success",Messenger().post(d))}function initAajxform(){$("form").each(function(a,b){"search"!=$(b).attr("id")&&$(b).ajaxForm({beforeSubmit:function(){return $(b).valid()?void modalLoading():!1},error:function(){bootbox.hideAll(),finAlert("提交数据过程中出现错误，请检查数据后重试提交",!1)},dataType:"JSON",success:function(a){if(bootbox.hideAll(),a.Success){var b=$(".modal");b.attr("class","modal animated fadeOut hidden"),$("#reservation-content input").val(""),$("#reservation-content textarea").val(""),finAlert(a.Msg,!0),null!=a.RedirectUrl&&""!=a.RedirectUrl&&a.IsRedirect&&setTimeout(function(){location=a.RedirectUrl},1e3),$("#myModal").length>0&&$("#myModal").modal("hide")}else finAlert(a.Msg,!1)}})})}function ajaxSubmit(a,b,c){$.ajax({url:a,data:b,beforeSend:function(){c=null==c?"正在提交数据....":c,modalLoading(c)},error:function(){bootbox.hideAll(),finAlert("提交数据过程中出现错误，请检查数据后重试提交",!1)},dataType:"json",success:function(a){bootbox.hideAll(),a.Success?(finAlert(a.Msg,!0),null!=a.RedirectUrl&&a.IsRedirect&&setTimeout(function(){location=a.RedirectUrl},1e3)):finAlert(a.Msg,!1)}})}jQuery(function(a){var b=window.ByteFunds||{};a(document).ready(function(){a(".qqService").click(function(){b.qqService()}),a(".qq").click(function(){b.qqService()}),b.ObtainNews1(),b.ObtainNews2(),b.hiddenModal(),b.showModal(),b.showCircle(),b.showUserList(),b.changeVersetList(),b.loadHeight(),b.loadBackgroundImg()}),b.qqService=function(b){var c=new Array("578485754","3226588475"),d=Math.floor(Math.random()*c.length);b||(b=c[d]);var e="<iframe style='display:none;' class='qq_iframe' src='tencent://message/?uin="+b+"&Site=&menu=yes'></iframe>";a("body").append(e)},b.ObtainNews1=function(){var b=a(".news-content-1").find("tr");if(b.length){var c=0,d=b.eq(c).children("td").eq(0).html(),e=b.eq(c).children("td").eq(1).html(),f=b.eq(c).children("td").eq(2).html(),g='<li class="animated fadeInUp"><span>'+d+'</span><a href="'+e+'">'+f+"</a></li>";a("#news-1").html(g),setInterval(function(){c++,c>=b.length&&(c=0);var d=b.eq(c).children("td").eq(0).html(),e=b.eq(c).children("td").eq(1).html(),f=b.eq(c).children("td").eq(2).html(),g='<li class="animated fadeInUp"><span>'+d+'</span><a href="'+e+'">'+f+"</a></li>";a("#news-1").html(g)},6e3)}},b.ObtainNews2=function(){var b=a(".news-content-2").find("tr");if(b.length){var c=0,d=b.eq(c).children("td").eq(0).html(),e=b.eq(c).children("td").eq(1).html();e&&(e=e.replace(/(.{3}).*(.{3})/,"$1*****$2"));var f=b.eq(c).children("td").eq(2).html(),g='<li class="animated fadeInUp"><span>'+d+"</span>用户: <span>"+e+"</span><span>"+f+"</span></li>";a("#news-2").html(g),setInterval(function(){c++,c>=b.length&&(c=0);var d=b.eq(c).children("td").eq(0).html(),e=b.eq(c).children("td").eq(1).html();e&&(e=e.replace(/(.{3}).*(.{3})/,"$1*****$2"));var f=b.eq(c).children("td").eq(2).html(),g='<li class="animated fadeInUp"><span>'+d+"</span>用户: <span>"+e+"</span><span>"+f+"</span></li>";a("#news-2").html(g)},5e3)}},b.hiddenModal=function(){var b=a(".closed"),c=a("#reservation-content");b.click(function(){c.attr("class","modal animated fadeOut hidden")})},b.showModal=function(){var b=a(".reservation-btn"),c=a("#reservation-content");b.click(function(){c.attr("class","modal animated fadeIn")})},b.showCircle=function(){var b=a("#indicatorContainer");if(b.length){var c=a("#indicatorValue").val();a("#indicatorContainer").radialIndicator({barColor:"#F5B024",barWidth:5,initValue:c,roundCorner:!0,percentage:!0,radius:30,fontFamily:"Calibri"})}},b.showCharts=function(){var b=a("#charts");b.length&&a("#charts").highcharts({chart:{},title:{text:"零钱计划第一季 一周收益",style:{color:"#F5B024",fontSize:"1.8em",fontFamily:"黑体",fontWeight:600}},xAxis:{categories:["09-06","09-07","09-08","09-09","09-10","09-11","09-12"]},series:[{type:"spline",name:"当日收益",data:[.121,.125,.123,.124,.131,.134,.135],marker:{lineWidth:3,lineColor:Highcharts.getOptions().colors[3],fillColor:"white"},itemStyle:{color:"red"}}]})},b.showUserList=function(){var b,c=a(".user-center"),d=a(".header-top-dropdown .uesr-btn"),e=!0;d.click(function(){e?(c.attr("class","user-center list animated fadeInRight"),d.css("outline",""),e=!1,b=setTimeout(function(){c.attr("class","user-center list  hidden"),d.css("outline","#F5B024"),e=!0,clearTimeout(b)},6e3)):(c.attr("class","user-center list  hidden"),d.css("outline","#F5B024"),clearTimeout(b),e=!0)})},b.changeVersetList=function(){for(var b=["蒋","沈","韩","李","张","王","赵","钱","孙","何","王","许","秦","朱","郑","冯","易","邓","周","杨","曹","孔","汪","杜","范","彭","杜","严","袁","唐"],c=(a(".invest-div table"),""),d=0;8>d;d++){var e=Math.floor(Math.random()*b.length),f=b[e],g=(a(".invest-div table"),100*Math.round(200*Math.random()+1)),h=(new Date).Format("yyyy-MM-dd"),i=(new Date).getHours()-1;8>i&&(i=23);var j=Math.round(59*Math.random());10>j&&(j="0"+j);var k=Math.round(59*Math.random());10>k&&(k="0"+k);var l=h+" "+i+":"+j+":"+k;c+='<tr><td class="td1">'+f+'*</td><td class="td2">'+g+'.00元</td><td class="td3">'+l+"</td></tr>"}a(".invest-body").html(c),setInterval(function(){var c=Math.floor(Math.random()*b.length),d=b[c],e=a(".invest-div table"),f=100*Math.round(200*Math.random()+1),g=(new Date).Format("yyyy-MM-dd"),h=(new Date).getHours()-1;8>h&&(h=23);var i=Math.round(59*Math.random());10>i&&(i="0"+i);var j=Math.round(59*Math.random());10>j&&(j="0"+j);var k=g+" "+h+":"+i+":"+j;e.animate({top:"-30px"},1500,function(){e.css("top","0");var b='<tr><td class="td1">'+d+'*</td><td class="td2">'+f+'.00元</td><td class="td3">'+k+"</td></tr>";a(".invest-body").append(b),a(".invest-body").children().eq(0).remove()})},3e3)},b.loadHeight=function(){var b=a("#header").innerHeight(),c=a("#footer").innerHeight(),d=a(window).height(),e=d-c-b;a(".loadPage").css({minHeight:e+"px"})},b.loadBackgroundImg=function(){var b=a(".loadBg"),c=["/assets/images/bg01.jpg","/assets/images/bg02.jpg","/assets/images/bg03.jpg"],d=Math.floor(Math.random()*c.length);b.length>0&&a(window).width()>960&&b.css({background:"url("+c[d]+")",backgroundSize:"100% 100%"})}}),$(function(){window.location.href.indexOf("Admin")>=0&&$("body").css("min-height",$("html").height()+"px"),initAajxform(),$(".logout").click(function(){return ajaxSubmit(this.href,null,"正在退出...."),$(this).attr("disabled",!0),!1}),$(".btnregister").click(function(){$("#myregisterModal").modal("show")}),$(".newsbtn").click(function(){$.get("/umbraco/Api/News/Get?key="+$(this).data("id"),function(a){$("#myLargeModalLabel").text(a.title),$("#content").html(a.content),$("#myModal").modal("show")},"json")}),$(".productBtn").click(function(){$.get("/umbraco/Api/News/Get?key="+$(this).data("id"),function(a){$("#myProductModalLabel").text(a.title),$("#productcontent").html(a.content),a.canbuy?($("#buyaction").show(),$("#buyaction").attr("href","/Pay?id="+a.id)):$("#buyaction").hide(),$("#myModalproduct").modal("show")},"json")}),$("#myModal").on("hidden.bs.modal",function(a){$("#myLargeModalLabel").text("比特金服"),$("#content").html('<div><img style="margin:0 auto" src="/assets/images/loading.jpg" alt="loading" /></div>')}),$("#myModalproduct").on("hidden.bs.modal",function(a){$("#myProductModalLabel").text("产品信息"),$("#productcontent").html('<div><img style="margin:0 auto" src="/assets/images/loading.jpg" alt="loading" /></div>')})}),Date.prototype.Format=function(a){var b=a,c=["日","一","二","三","四","五","六"];b=b.replace(/yyyy|YYYY/,this.getFullYear()),b=b.replace(/yy|YY/,this.getYear()%100>9?(this.getYear()%100).toString():"0"+this.getYear()%100);var d=this.getMonth()+1;return b=b.replace(/MM/,d>9?d.toString():"0"+d),b=b.replace(/M/g,d),b=b.replace(/w|W/g,c[this.getDay()]),b=b.replace(/dd|DD/,this.getDate()>9?this.getDate().toString():"0"+this.getDate()),b=b.replace(/d|D/g,this.getDate()),b=b.replace(/hh|HH/,this.getHours()>9?this.getHours().toString():"0"+this.getHours()),b=b.replace(/h|H/g,this.getHours()),b=b.replace(/mm/,this.getMinutes()>9?this.getMinutes().toString():"0"+this.getMinutes()),b=b.replace(/m/g,this.getMinutes()),b=b.replace(/ss|SS/,this.getSeconds()>9?this.getSeconds().toString():"0"+this.getSeconds()),b=b.replace(/s|S/g,this.getSeconds())};